---
title: >-
  TIP-将hexo生成的博客网页放在Github.io子目录
date: 2021-12-21 19:34:11
tags:
---

## 将hexo生成的博客网页放在Github.io子目录 Put Hexo-Generated Blog Pages into Subdirectories of Github Pages

Hexo提供了一个方便快捷的静态博客生成框架。其对Markdown和Github Pages的兼容让人们可以轻松地在自己的github.io主页上搭建自己的博客。可是，我并不想让整个主页沦为一个简简单单的博客。博客只是主页的一部分，所以这里记录了如何将Hexo生成的博客网页放在一个给定的子目录里。

Hexo provides a convenient framework to build static blogs. Its compatibilities with Markdown and Github Pages allow people to easily deploy their blog on their github.io. However, I do not want the whole page only include one blog system. Blog may just be a part of the page. Therefore, here record the instructions on how to put Hexo-Generated blog contents into the target subdirectory.

### 前提 Assumptions

- 这里默认是按照Hexo官方文档英文版[Deployment>Github Pages](https://hexo.io/docs/github-pages)的方式，在Github Pages上部署Hexo框架的。  
  - 其中主要运行了[peaceiris/actions-gh-pages](https://github.com/peaceiris/actions-gh-pages)，将Hexo在Github生成的`./public`目录下的内容`commit`到`master`或`main`主分支下。  
  - 如果使用了官方文档中文版[部署>Github Pages](https://hexo.io/zh-cn/docs/github-pages.html)或是其他部署方式的话，可能需要进一步设置。

- Here I assumed you had followed the instructions of Hexo's official documentation on [Deployment>Github Pages](https://hexo.io/docs/github-pages) to deploy your Hexo framework on Github Pages.
  - It mainly utilizes [peaceiris/actions-gh-pages](https://github.com/peaceiris/actions-gh-pages) to commit the `./public` directory generated by Github to the `master` or `main` branch.
  - If you used other methods, it may need further modifications.

### Workflows, pages.yml, and actions-gh-pages

在最后一步`Deploy`的`with`下增加参数`destination_dir`并填入你所要的子目录。  
In the final step `Deploy`, ADD the ARGument `destination_dir` with your target subdirectory INTO `with`.

```yml
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
          publish_branch: master  # deploying branch
```

↓

```yml
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
          destination_dir: ### <<<<< YOUR DESTINATION SUBDIR###
          publish_branch: master  # deploying branch
```

### Hexo _config.yml

- 编辑`_config.yml`：
  - 将`_config.yml`中的`url`参数改为你所要的子目录绝对路径。
  - 并将其相对路径添加成`root`参数。（建议在`url`下方添加）  

- EDIT `_config.yml`:
  - CHANGE `url` argument into the absolute url of your target subdir.
  - ADD its relative url as the `root` argument.

```yml
# URL
## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'
url: http://BUTLER36HUS.github.io/
```

↓

```yml
# URL
## Set your site url here. For example, if you use GitHub Page, set url as 'https://username.github.io/project'
url: http://BUTLER36HUS.github.io/YOUR DESTINATION SUBDIR
root: /YOUR DESTINATION SUBDIR/
```

Done!

### 结尾 Final Words

1. 如果之前已经在主分支下部署过Hexo的话，需要清理主分支，只保留新生成的子目录。
If you have already deployed Hexo before, you may need to clean your master/main branch and only keep the new generated subdirectory.
2. 部署在子目录之后需要为其提供一定的入口。比方说，可以新建一个`index`并提供一个重定向超链接。 After deploying subdirectory, you need to provide certain entries for it. For example, you can create a new `index` and add a redirect link there.
